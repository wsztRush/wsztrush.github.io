---
layout: post
title: JQUERY
date: 2015-09-16
categories: 读书笔记

---

![](http://img4.douban.com/mpic/s10170467.jpg)

## 为什么学习jQuery

原生JavaScript写代码很不方便而且容易出错（一直感觉写getElementById非常地烦），再加上浏览器之间差异处理起来就更烦躁了，jQuery刚好能解决这些问题，而且：

1. 轻量级
2. 链式编程
3. 隐式迭代
4. 丰富的插件支持

那么，赶紧开始jQuery之旅！

## 元素选择及操作

用jQuery在选择元素时和用CSS选择非常像且代码量很少，因此上手很容易：

选择器|用法
-|-
基本选择器|$('div')
层次选择器|$('.a > div')
基本过滤选择器|$('div:first')、$('input:even')、$('header')
内容过滤选择器|$('div:contains(di)')
可见性过滤选择器|$('div:visible')、$('div:hidden')
属性过滤选择器|$('div[title]')、$('div[id]\[title*=es]')
子元素过滤选择器|$('div.one :nth-child(2)')、$('div.one :first-child')
表单对象属性过滤选择器|$('#form1 input:enable')、$('input:checked')
表单选择器|$('#form1 :input')、$('#form1 :password')

遇到特殊字符时需要转义，比如对**&lt;div id="id#b"&gt;bb&lt;/div&gt;**需要用**$('#id\\#b')**来选取，编写时尤其需要注意空格，挨着和不挨着的区别太大了：

- $('.test :hidden')
- $('.test:hidden')

除了可以使用jQuery，还有其他的方式支持CSS选择器，这里就省略了~ 用选择器拿到的是jQuery对象（对dom对象做了封装），可用$cr[0]拿到对应的dom对象~

另外jQuery对DOM操作的封装有：

操作|用法
-|-
创建|$('&lt;li&gt;abc&lt;/li&gt;')
插入|$("p").prepend($('&lt;li&gt;abc&lt;/li&gt;'))
删除|remove
复制|$(this).clone(true)没有参数时复制生成的对象不具有任何行为
替换|$("p").replaceWith("&lt;strong&gt;abc&lt;strong&gt;")
包裹|$("strong").warp("&lt;b&gt;&lt;/b&gt;")
设置/获取属性|获取：$para.attr("title")，设置：$para.attr("title", "new title")
样式|addClass、removeClass、toggleClass、hasClass、css
文本|获取：$para.html()，设置：$para.html("&lt;strong&gt;abc&lt;strong&gt;")，text()/val()
子元素|children
兄弟元素|next、pre、sibling

## 事件与动画

以前经常在代码中看到：

<pre class="prettyprint">
$(function(){
    // DOM就绪时执行的方法
});
</pre>

作用像是绑定了对ready的响应，而对于普通的事件（鼠标点击等）可以用**bind**来统一搞定：

> bind(type, [, data], fn)

其中：
- **type**：事件类型，可以是自定义名称
- **data**：可选参数，作为event.data属性值传递给事件对象的额外数据对象
- **fn**：绑定的处理函数

另外在jQuery中有两个合成事件：**hover**和**toggle**，对于hover：

> hover(enter, lever)

分别用两个函数来响应移入和移出，而toggle就比较暴力了：

> toggle(f1, f2, ...., fn)

在第一次点击时调用f1、第二次调用f2、依次类推，n个方法循环调用（没想到需要用到什么地方- -!），jQuery对事件对象进行了封装：

方法|作用
-|-
type()|类型
stopPropagation()|停止事件冒泡
preventDefault()|阻止默认的行为，比如可以阻止点击&lt;a&gt;标签打开新页面的行为
target()|触发事件的元素
relatedTarget()|获取相关元素，在mouseover和mouseout的时候经常用到
which()|鼠标点击或者键盘点击事件中，获取具体的按键

既然能绑定就应该能解除：

> unbind([type] \[, fn])

为了操作方便经常需要做一些快捷键，比如按F5就运行程序，效果和点击运行按钮一样。这个做起来很简单，用**trigger**模拟向运行按钮发送一个click事件即可。

产品经理经常会想给事件响应加上一个酷炫的动画效果，用jQuery做起来很简单：

操作|效果
-|-
show/hide|显示、隐藏元素，可通过参数控制速度
fadeIn/fadeOut|改变元素不透明度
slideUp/slideDown|改变元素高度
animate|自定义动画，上面的功能用该方法都很容易搞定
toggle|两种状态切换，用在按钮的效果上面非常合适
slideToggle|通过高度变化来切换元素的可见性
fadeTo|以渐进的方式修改不透明度

其中**animate**的定义如下：

> animate(params, speed, callback)

参数含义如下：

1. params：包含样式属性及值的映射，用来控制动画的行为
2. speed：速度
3. callback：结束时的回调函数

下面来看几个实际的例子感受下：

<pre class="prettyprint">
$(this).animate({left:"500px"}, 3000);// 使left从原来的值变为500
$(this).animate({left:"+=500px"}, 3000);// 使left从原来的值增加500
$(this).animate({left:"+=500px",height:"+=600px"}, 3000);// 多重动画
$(this).animate({left:"+=500px"}, 3000)
       .animate({height:"+=500px"}, 3000);// 两个动画效果链式写法
</pre>

延迟总是会带来问题，比如为元素的移入、移出设计了动画，但是在鼠标快速移动的时候动画的效果可能就与实际鼠标的位置不一致了，这时候需要

> stop([cleanQueue] \[, gotoEnd])

其中：

1. cleanQueue：是否清空未执行完成的动画
2. gotoEnd：是否将正在执行的动画跳转到末状态

另外可以使用**$(this).is(":animated")**判断元素是否处于动画状态！

## 表单及表格

// TODO 144

## Ajax

## 插件



[API](http://jquery.cuishifeng.cn/index.html)

## 总结

2. 链式操作
6. 表单+表格
7. ajax
8. 插件