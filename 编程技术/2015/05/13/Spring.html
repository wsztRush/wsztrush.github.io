<!DOCTYPEhtmlPUBLIC"-//W3C//DTDXHTML1.0Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html>
	<!-- 引入CSS/JS -->
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="/assets/css/main.css"/>
	<script type="text/javascript" src="/assets/javascripts/main.js"></script>

	<!-- pygments代码高亮 -->
	<!-- <link rel="stylesheet" type="text/css" href="/assets/css/pygments.css"/> -->
	<!-- google代码高亮 -->
	<script src="/assets/css/prettify.js"></script>
	<link href="/assets/css/prettify.css" rel="stylesheet">
	<title>Spring</title>
</head>

	<body onload="prettyPrint()">
		<div class="post-container">
			<h1>Spring</h1>
			<p>如今作为一个Java程序员，如果没用过Spring的话基本上没法混了~ 这里就不再啰嗦如何如何从EJB走到了Spring，直接来看它带给我们的东西：</p>

<ol>
  <li>IoC</li>
  <li>Aop</li>
  <li>SpringMVC</li>
</ol>

<p>下面分几个部分很粗地描述一下Spring~</p>

<h2 id="section">控制反转</h2>

<p>要看控制反转，那么我们先看看没有反转的时候是什么样子的，当自己的服务依赖于别人的实现时，在其使用之前选择合适的服务实现对其进行初始化：</p>

<pre class="prettyprint">
public class MyService {
	private XXService xxService;
    public MyService(){
    	this.xxService = new XXServiceImpl();/* 利用合适的实现进行初始化 */
    }
    // ...
}
</pre>

<p>程序可以正常运行，但是当你有几十个类中使用了XXService，而某一天发现XXServiceImpl是有BUG的，你想换个实现类，那就傻逼了~~</p>

<p>用IoC最原始的配置方式就可以将这个问题引刃而解：</p>

<pre class="prettyprint">
&lt;bean id="myService" class="com.test.MyService"&gt;
	&lt;property name="xxService" ref="xxService"/&gt;
&lt;/bean&gt;
&lt;bean id="xxService" class="com.test.XXServiceImpl"/&gt;&lt;!-- 改这里 --&gt;
</pre>

<p>在配置文件中搞定他们之间的依赖关系，在使用前，需要用<strong>BeanFactory</strong>来构建其中的Bean，在需要时，调用<strong>getBean</strong>取得实例，然后就可以继续后面的操作了：</p>

<pre class="prettyprint">
BeanFactory factory = new ClassPathXmlApplicationContext("applicationContext.xml");
MyService myService = (MyService)factory.getBean("myService");
</pre>

<p>可能“顽固派”会说：干嘛要怎么麻烦，把你要使用的类包装一下再交给MyService使用就可以了啊！确实可以解决问题，但是思路决定出路，这种解决方法确实解决了上面的问题，但是下面<strong>ApplicationContext</strong>的登场，使得这种依赖管理变得异常简单：</p>

<pre class="prettyprint">
public class MyService {
	@Resource /* 利用注解完成注入 */
	private XXService xxService;
    // ...
}
@Component("xxService") /* 声明一个Bean */
public class XXServiceImpl{
	// ...
}
</pre>

<p>一直感觉注解在Java中的作用就是将配置信息植入到代码文件里面，在依赖管理中注解再一次发挥了巨大的威力。到这里基本上满足大部分的需求了，但是Spring提供的功能可能远超过了你需要的：</p>

<ol>
  <li>BeanFactoryAware：获取BeanFactory实例</li>
  <li>BeanPostProcessor：在afterPropertiesSet的方法前后执行</li>
  <li>InitializingBean：完成一些初始化动作</li>
  <li>BeanFactoryPostProcessor:处理Bean的定义，也就是BeanDefinition</li>
</ol>

<p>还有很多其他的扩展点，下面重点看下Bean的生命周期：</p>

<p><img src="http://7xiz10.com1.z0.glb.clouddn.com/Spring-Bean生命周期.png" alt="" /></p>

<p>另外IoC里面有很多的细节点，逐步整理中：</p>

<table>
  <thead>
    <tr>
      <th>关键字</th>
      <th>作用</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>byType/byName</td>
      <td>根据类型/名字注入</td>
    </tr>
    <tr>
      <td>scope(singleton/prototype)</td>
      <td>单例还是每次都生成一个新的Bean</td>
    </tr>
    <tr>
      <td>factory-bean/FactoryBean</td>
      <td>工厂类型的Bean，getBean时会调用其getObject方法</td>
    </tr>
    <tr>
      <td>@Resource</td>
      <td>默认byName，找不到的时候就byType(指定name就只能byName了)</td>
    </tr>
    <tr>
      <td>@Autowire</td>
      <td>默认byType，可以配合@Qualifier变为byName</td>
    </tr>
    <tr>
      <td>lazy-init</td>
      <td>只对singleton的Bean起作用，效果是在getBean的时候才初始化</td>
    </tr>
  </tbody>
</table>

<h2 id="section-1">面向切面编程</h2>


			<!-- 评论组件 -->
			<div id="disqus_thread"/>
		</div>
		<div id="bar" class="category" style="left:-165px;">
	<div class="icon"><a href="/about/"><img src="http://7xiz10.com1.z0.glb.clouddn.com/me.png"/></a></div>
	<div class="icon"><a href="/categories.html"><img src="http://7xiz10.com1.z0.glb.clouddn.com/list.png"/></a></div>
	<div class="icon"><a href="https://github.com/wsztrush"><img src="http://7xiz10.com1.z0.glb.clouddn.com/github.png"/></a></div>
	<div class="icon"><a href="http://weibo.com/wsztrush"><img src="http://7xiz10.com1.z0.glb.clouddn.com/weibo.png"/></a></div>
	<div class="icon"><img id="barClick" src="http://7xiz10.com1.z0.glb.clouddn.com/right.png"/></div>
</div>

	</body>
</html>
<!-- 评论组件 -->
<script type="text/javascript">
	var disqus_shortname = 'wsztrush';
	(function() {
		var dsq = document.createElement('script');
		dsq.type = 'text/javascript';
		dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<!-- 百度访问统计 -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?08a976e8d7e5a20acfcb566bd22a1db1";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<script type="text/javascript">
	document.getElementById("barClick").onclick = click;
</script>

