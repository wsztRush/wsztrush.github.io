<!DOCTYPEhtmlPUBLIC"-//W3C//DTDXHTML1.0Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html>
	<!-- 引入CSS/JS -->
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="/assets/css/main.css"/>
	<script type="text/javascript" src="/assets/javascripts/main.js"></script>

	<!-- pygments代码高亮 -->
	<!-- <link rel="stylesheet" type="text/css" href="/assets/css/pygments.css"/> -->
	<!-- google代码高亮 -->
	<script src="/assets/css/prettify.js"></script>
	<link href="/assets/css/prettify.css" rel="stylesheet">
	<title>从下向上的开发</title>
</head>

	<body onload="prettyPrint()">
		<div class="tool">
	<span><b>WsztRush</b></span>
	<div class="links">
		<a href="/index.html">Blog</a>
		<a href="/categories.html">Categories</a>
		<a href="/about/">About</a>		
	</div>
</div>

		<div class="post-container">
			<h1>从下向上的开发</h1>
			<p>因为在公司接触业务比较少，更多的是在想办法做一些工具来帮助快速开发，过程中感觉做业务的思路与做工具（系统）的思路差别比较大。下面分享一下在两个模块中的思考过程。</p>

<h2 id="section">获取数据</h2>

<p>团队做的业务复杂无比，其中包括很多报表，如果按照一般的开发流程：</p>

<ol>
  <li>iBatis(SQL)</li>
  <li>DAO+DO</li>
  <li>Manager</li>
  <li>Web+VO</li>
</ol>

<p>有几十张这样的报表的话，写起来还是非常痛苦的。那么，思考一下是否可以把里面真正的<strong>逻辑部分</strong>取出来，其他的代码都非常像就直接重用即可：</p>

<blockquote>
  <p>写一个SQL就可以完成数据的读取和组织！</p>
</blockquote>

<p>那么现在配置数据接口就非常简单了。</p>

<p>当初乐观地以为这样就结束了，<strong>图样图森破啊</strong>！！SQL返回的其实是一个LIST，而实际中报表的类型千差万别：</p>

<pre class="prettyprint">
{
    title : "xxx",
    data : [1, 2, 3, 4, 5, 6, 7, 8]
}
</pre>

<p>还有：</p>

<pre class="prettyprint">
[
    {text : 'A', value : 1},
    {text : 'B', value : 2}
]
</pre>

<p>甚至还有一些常量、枚举，于是我们火速开发了更多的一些取数据的功能：</p>

<ol>
  <li>MYSQL</li>
  <li>MYSQL-XXX</li>
  <li>JSON</li>
  <li>VELOCITY</li>
  <li>XXXX</li>
</ol>

<p>最后我们增加了一个<strong>GROOVY</strong>加工数据的功能，世界一下子清净。但是，看起来很美好的一个设计用起来其实并不那么美好。</p>

<p>在一开始考虑的时候只想到：</p>

<blockquote>
  <p>我要一个可以XXX的系统。</p>
</blockquote>

<p>写代码的时候直接奔着这个目标就去了，不带任何的拐弯抹角。当我们一步到位完成后洋洋得意时，可能更多的考虑下：</p>

<blockquote>
  <p>我们的系统可以从哪些地方可以扩展？留有多少的灵活性？</p>
</blockquote>

<p>回归正题，尝到一点脚本语言的甜头后：</p>

<blockquote>
  <p>是否可以用脚本来加工数据？应该没有比这个更灵活的了～</p>
</blockquote>

<h2 id="section-1">组装页面</h2>

<!--

<section><h1>从下到上开发</h1></section>
<section data-markdown data-separator="---" data-separator-vertical="--"  >
	<script type="text/template">
		<span style="color:red;">&lt;abc&gt;</span><span style="color:red;">abc</span>
	</script>
</section>

<section data-markdown data-separator="---" data-separator-vertical="--"  >
	<script type="text/template">
    # 主题1
    - 主题1-内容1
    - 主题1-内容2
<img src="https://www.google.com.hk/logos/doodles/2015/beethovens-245th-birthday-4687587541254144.2-res.png"/>
    --
    ## 主题1-内容1
    内容1-细节1
    --
    ## 主题1-内容2
    内容1-细节2
    ---
    # 主题2
	</script>
</section>
-->

			<!-- 评论组件 -->
			<div id="disqus_thread"/>
		</div>
	</body>
</html>
<!-- 评论组件 -->
<script type="text/javascript">
	var disqus_shortname = 'wsztrush';
	(function() {
		var dsq = document.createElement('script');
		dsq.type = 'text/javascript';
		dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<!-- 百度访问统计 -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?08a976e8d7e5a20acfcb566bd22a1db1";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>


